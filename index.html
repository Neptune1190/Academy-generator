<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Rite Generator</title>
<style>
  body {
    font-family: monospace;
    background: #0f1113;
    color: #e6eef0;
    padding: 18px;
    max-width: 820px;
    margin: 0 auto;
  }
  h2 { color: #f08a5d; margin: 0 0 12px 0; }
  label { display:block; margin-top:10px; font-size:14px; }
  input[type="text"], input[type="number"], select {
    width:100%;
    padding:8px;
    margin-top:6px;
    background:#131417;
    color:#e6eef0;
    border:1px solid #26292c;
    border-radius:6px;
    box-sizing:border-box;
    font-family:monospace;
  }
  .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  .row > * { flex:1; min-width:220px; }
  button {
    margin-top:14px;
    padding:10px 14px;
    background:#f08a5d;
    color:#082029;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
  }
  textarea {
    width:100%;
    height:320px;
    margin-top:14px;
    background:#0f1315;
    color:#b9f6d9;
    border:1px solid #222426;
    border-radius:6px;
    padding:10px;
    font-family:monospace;
    font-size:14px;
    white-space:pre-wrap;
  }
  .small { font-size:13px; color:#9fb2b1; margin-top:6px; }
  #copyBtn {
    background:#38c172;
    color:#03160d;
    margin-left:10px;
  }
  .btnRow { display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
</style>
</head>
<body>
  <h2>☰ Rite Format Generator</h2>

  <label>Host (Discord mention or ID):</label>
  <input id="host" placeholder="<@320597836758777856>" type="text">

  <label>Rite Type:</label>
  <select id="rite">
    <option>Ascension Ceremony</option>
    <option>Korriban Excursion</option>
    <option>Rite of Advancement</option>
    <option>Rite of Lore</option>
    <option>Rite of Doctrine</option>
    <option>Rite of Passage</option>
  </select>

  <label>Server Name / Private Server Code:</label>
  <input id="server" placeholder="Server name or code" type="text">

  <div class="row">
    <div>
      <label>Start delay (minutes):</label>
      <input id="delay" type="number" min="0" value="10">
      <div class="small">Set number of minutes from current Newfoundland time (default 10).</div>
    </div>

    <div>
      <label>Timestamp style:</label>
      <select id="tsStyle">
        <option value="R">Relative (e.g. &lt;t:...:R&gt;)</option>
        <option value="f">Short (e.g. &lt;t:...:f&gt;)</option>
        <option value="F">Long (e.g. &lt;t:...:F&gt;)</option>
      </select>
      <div class="small">Choose which Discord timestamp format to insert.</div>
    </div>
  </div>

  <div class="btnRow">
    <button id="generateBtn">Generate Message</button>
    <button id="copyBtn">Copy to Clipboard</button>
  </div>

  <textarea id="output" readonly placeholder="Generated message will appear here"></textarea>

<script>
(function(){
  const roleMap = {
    "Ascension Ceremony": "<@&1151341324298092614>",
    "Korriban Excursion": "<@&1151341234615484439>",
    "Rite of Advancement": "<@&1150187179742609408>",
    "Rite of Lore": "<@&1150186944299536404>",
    "Rite of Doctrine": "<@&1150186946153418833>",
    "Rite of Passage": "<@&873072129816551427>"
  };

  const sithEmoji = "<:sith:1155672133838581860>";
  const btnGen = document.getElementById('generateBtn');
  const btnCopy = document.getElementById('copyBtn');
  const output = document.getElementById('output');

  function toNewfoundlandNow() {
    const now = new Date();
    const utcMillis = now.getTime() + now.getTimezoneOffset() * 60000;
    const nfOffsetMillis = (-2.5) * 60 * 60 * 1000; // UTC-2:30
    return new Date(utcMillis + nfOffsetMillis);
  }

  function buildHeader(rite) {
    const noPrefix = ["Ascension Ceremony", "Korriban Excursion"];
    const title = noPrefix.includes(rite) ? rite : `Rite of ${rite.replace(/^Rite of /i, "").trim()}`;
    return `☰  ${sithEmoji}   | ${title} |  ${sithEmoji}  ☰`;
  }

  function buildTimestamp(dateObj, style) {
    const secs = Math.floor(dateObj.getTime() / 1000);
    return `<t:${secs}:${style}>`;
  }

  btnGen.addEventListener('click', () => {
    const host = (document.getElementById('host').value || "<@000000000000000000>").trim();
    const rite = (document.getElementById('rite').value || "Ascension Ceremony").trim();
    const server = (document.getElementById('server').value || "N/A").trim();
    const delayMinutes = Number(document.getElementById('delay').value || 10);
    const tsStyle = document.getElementById('tsStyle').value || "R";

    const location = (rite === "Korriban Excursion") ? "Korriban" : "Acolyte Barracks";
    const nfNow = toNewfoundlandNow();
    const start = new Date(nfNow.getTime() + Math.max(0, delayMinutes) * 60 * 1000);
    const discordTimestamp = buildTimestamp(start, tsStyle);
    const header = buildHeader(rite);

    const content = [
      "╭─────────────────────────╮",
      `Host: ${host}`,
      `Location: ${location} | ${server}`,
      `Status: Pending`,
      `Passed: `,
      `Starting time: ${discordTimestamp}`,
      `Time of conclusion : `,
      `Note: Do not attend if you are on cooldown or at the rank of Youngling III+ in TJO.`,
      "╰─────────────────────────╯",
      roleMap[rite] || ""
    ].join("\n");

    output.value = header + "\n" + content;
  });

  btnCopy.addEventListener('click', () => {
    if (!output.value.trim()) return alert("No message to copy! Generate one first.");
    output.select();
    document.execCommand("copy");
    btnCopy.textContent = "Copied!";
    setTimeout(() => btnCopy.textContent = "Copy to Clipboard", 1500);
  });
})();
</script>
</body>
</html>
